<div class="view-root {{statefulConcept.isSubconceptExtended() ? 'extended-subconcepts-extended-padding':''}}">
    <!--The current concept and it's different states-->
    <div id="current-concept" (mouseover)="onHover(true)" (mouseleave)="onHover(false)">
        <!--The concept's smaller default state-->
        <div class="concept-card-default" *ngIf="!showConceptExpandedCard">
            <div class="concept-name-and-connect-point">
                <div class="connection-point" *ngIf="statefulConcept.hasParent()">
                    <div class="connection-point">
                    </div>
                </div>
                <div class="concept-name">
                    <p class="concept-name">{{statefulConcept.name}}</p>
                </div>
                <div class="connection-point default" *ngIf="statefulConcept.isSubconceptExtended()">
                    <div class="connection-point">
                    </div>
                </div>

            </div>
            <div class="ellipsis">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>

        <!--The concept's bigger extended state-->
        <div id="concept-expanded" class="concept-expanded" *ngIf="showConceptExpandedCard">
            <div id="concept-name-and-order-toggle" class="concept-name-and-order-toggle">
                <div class="connection-point" *ngIf="statefulConcept.hasParent()">
                    <div class="connection-point">
                    </div>
                </div>
                <textarea id="concept-name" class="concept-name" [(ngModel)]="statefulConcept.name" matInput
                    cdkTextareaAutosize [cdkAutosizeMinRows]="1" [cdkAutosizeMaxRows]="6" (focus)="onFocus(true)"
                    (focusout)="onFocus(false)"></textarea>

                <mat-slide-toggle id="order-subconcepts-toggle" color="accent"
                    [(ngModel)]="statefulConcept.hasOrderedSubconcepts" (toggleChange)="toggleSubconceptOrdered()">
                </mat-slide-toggle>

            </div>
            <div class="definition">
                <p class="definition-label">Definition</p>
                <textarea id="concept-definition" class="definition" [(ngModel)]="statefulConcept.definition" cdkTextareaAutosize [cdkAutosizeMinRows]="1" [cdkAutosizeMaxRows]="7" (focus)="onFocus(true)"
                (focusout)="onFocus(false)"></textarea>
            </div>
            <div id="subconcept-div" class="subconcept-div-row" *ngFor="let subconcept of statefulConcept.subconcepts">
                <mat-icon class="delete-button">highlight_off</mat-icon>
                <textarea id="sub-concept-name" class="sub-concept-name" [(ngModel)]="subconcept.name" matInput
                    cdkTextareaAutosize [cdkAutosizeMinRows]="1" [cdkAutosizeMaxRows]="4" (focus)="onFocus(true)"
                    (focusout)="onFocus(false)"></textarea>
                <div class="connection-point" *ngIf="subconcept.isExtended()">
                    <div class="connection-point">
                    </div>
                </div>

                <div class="extend-subconcept-button" *ngIf="!subconcept.isExtended()"
                    (click)="extendSubConcept(subconcept)">
                    <mat-icon class="extend-button">
                        chevron_right
                    </mat-icon>
                </div>
            </div>
            <div id="add-sub-concept-button-row" class="add-sub-concept-button-row">
                <div id="add-sub-concept-button" class="add-sub-concept-button" (click)="addSubconcept()">
                    <mat-icon class="add-button">add</mat-icon>
                </div>
            </div>
        </div>
    </div>
    <!-- connection line-->
    <div class="connection-line" *ngIf="statefulConcept.isSubconceptExtended()">

    </div>
    <!--The concept's extended subconcepts-->
    <div id="extend-subconcepts" class="extended-subconcepts">
        <!-- extra div is used as two templates can't be used on an element-->
        <div *ngFor="let subconcept of statefulConcept.subconcepts">
            <app-concept-viewer [statefulConcept]="subconcept" *ngIf="subconcept.isExtended()"></app-concept-viewer>

        </div>
        
    </div>
   
</div>